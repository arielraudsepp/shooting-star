<!doctype html>
<!doctype html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.js" integrity="sha512-dqw6X88iGgZlTsONxZK9ePmJEFrmHwpuMrsUChjAw1mRUhUITE5QU9pkcSox+ynfLhL15Sv2al5A0LVyDCmtUw==" crossorigin="anonymous"></script>
             <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" integrity="sha512-8bHTC73gkZ7rZ7vpqUQThUDhqcNFyYi2xgDgPDHc+GXVGHXq+xPjynxIopALmOPqzo9JZj0k6OqqewdGO3EsrQ==" crossorigin="anonymous" /> -->
        <title>Skills Tracker</title>
        <style>
         .small {
             max-width: 80px;
         }

        </style>
    </meta>
    </head>

    <body>
        <div class="main ui container">
            <form class="ui form" id="test-form" >
                <h1 class="ui center aligned header">Skills Tracker</h1>
                <div class="field">
                    <label>Skill Name</label>
                    <input type="text" id="name" class="small">
                </div>
                <button class="ui primary submit button" type="submit" style="margin-top: 10px">Submit</button>
            </form>
        </div>

        <div id="submit">
        </div>

        <script>
         function prettyPrintResponse(responseBody){
             let skill = JSON.parse(responseBody);
             let fields = Object.keys(skill); // This is the data we also need for headers.
             let row = fields.map(field => `<td>${skill[field]}</td>`);
             let headerRow = fields.map(field => `<th>${field}</th>`);
             let tableStart = ["<table>", "<tr>"]
                 .concat(headerRow)
                 .concat(["</tr>", "<tr>"])
                 .concat(row)
                 .concat(["</tr>", "</table>"])
                 .join("\n");
             document.getElementById("submit").innerHTML += tableStart //creates table in submit div of response
         }

         function postData (event){
             const skill_name = document.getElementById("name").value;
             event.preventDefault();
             console.log(skill_name);

             //debugger;
             fetch('http://localhost:8000/enter_data', {
                 method: 'POST',
                 headers: new Headers({
                     "Accept": "application/json",
                     "Content-Type": "application/json"
                 }),
                 body: JSON.stringify({
                     "name": skill_name,
                     "completed": true
                 })
             })
                 .then(response => response.text())
                 .then(prettyPrintResponse);

         }
         const form = document.getElementById("test-form");
         form.onsubmit = postData;
        </script>

    </body>
</html>
