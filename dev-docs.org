#+TITLE: Dev Docs

* About
This DBT/Mindfulness app will provide a way to track customizable skills, offer practices and provide data on progress.

It will be a web-based application. The home-screen will require the user to log into their account. They will then be able to select the date from a calendar they want to add data. It will display the skills they have chosen have displayed and they will input data. The data will be saved in the database. Users can view historical data and view the help section.

* Approach
- problem-based learning drawn from "Zero to Prod in Rust"
** User Stories
- capture the who we are building it for, the actions they want to perform, and their motives
- as a ... I want to.. so that...
1) As a user,
    I want to store my scores for multiple skills each day,
    So that I can track progress
2) As a user,
    I want to view stored scores,
    So that I can review progress
** Stack
- React with Typescript

* Linting and Formatting
** Linting
#+begin_src
cargo clippy
#+end_src
** Formatting
#+begin_src
cargo fmt
#+end_src
* Docker
** Launch Postgres server
#+begin_src shell
chmod +x scripts/init_db.sh
./scripts/init_db.sh
#+end_src

#+RESULTS:
| 8e36c549a4ce9bc0151cb14b73707c211184690e9351f9a3c2ade1cd3d9bd935 |                        |        |        |        |              |              |
| Applied                                                          | 20211228003329/migrate | create | diary  | skills | table        | (1.789583ms) |
| Applied                                                          | 20211228005507/migrate | create | skills | table  | (4.741708ms) |              |
| Applied                                                          | 20211228005520/migrate | create | diary  | table  | (3.060958ms) |              |
| Applied                                                          | 20211228003329/migrate | create | diary  | skills | table        | (1.672625ms) |
| Applied                                                          | 20211228005507/migrate | create | skills | table  | (4.482375ms) |              |
| Applied                                                          | 20211228005520/migrate | create | diary  | table  | (3.15ms)     |              |


** Kill Postgres Server
#+begin_src shell
docker kill $(docker ps -q)
#+end_src

#+RESULTS:
: e278d35bea03

* Postgres
** Migrate Database
#+begin_src shell
SKIP_DOCKER=true ./scripts/init_db.sh
#+end_src

#+RESULTS:

** Seed the database
#+begin_src shell
cargo run --bin run_seeds
#+end_src

#+RESULTS:

* API
** Health Check
#+begin_src restclient
GET http://localhost:8000/health_check
#+end_src

#+RESULTS:
#+BEGIN_SRC js
// GET http://localhost:8000/health_check
// HTTP/1.1 200 OK
// content-length: 0
// date: Mon, 27 Dec 2021 20:04:15 GMT
// Request duration: 0.004877s
#+END_SRC

When running a health check we should return a 200.
#+NAME: Expected Health Check Response
#+BEGIN_SRC js
 // GET http://localhost:8000/health_check
 // HTTP/1.1 200 OK
 // content-length: 0
 // date: Thu, 30 Sep 2021 03:37:37 GMT
 // Request duration 0.029655s
#+END_SRC

#+RESULTS: Expected Health Check Response
** Diary Entries
*** Create Diary Entry
#+begin_src restclient
POST http://localhost:8000/diary_entries (Action: create)
Content-Type: application/json
{
"entry_date": "2021-12-30T17:53:59Z",
"skill_names": ["observe", "describe", "participate"]
}
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "id": 23,
  "entry_date": "2021-12-30",
  "created_at": "2022-01-03T19:26:43.385155Z"
}
// POST http://localhost:8000/diary_entries
// HTTP/1.1 201 Created
// content-length: 78
// content-type: application/json
// date: Mon, 03 Jan 2022 19:26:43 GMT
// Request duration: 0.134511s
#+END_SRC

*** Show Diary Entry by ID (Action: show)
#+begin_src restclient
GET http://localhost:8000/diary_entries/21
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "id": 21,
  "entry_date": "2021-12-30",
  "created_at": "2022-01-03T18:44:06.152600Z"
}
// GET http://localhost:8000/diary_entries/21
// HTTP/1.1 200 OK
// content-length: 78
// content-type: application/json
// date: Mon, 03 Jan 2022 19:26:48 GMT
// Request duration: 0.019942s
#+END_SRC

** Skills
*** Show Skill by ID (Action: show)
#+begin_src restclient
GET http://localhost:8000/skills/215
#+end_src

#+RESULTS:
#+BEGIN_SRC js
{
  "id": 215,
  "name": "build_mastery"
}
// GET http://localhost:8000/skills/215
// HTTP/1.1 200 OK
// content-length: 33
// content-type: application/json
// date: Mon, 03 Jan 2022 19:26:57 GMT
// Request duration: 0.016900s
#+END_SRC

*** Retrieve all Skills (Action: index)
#+begin_src restclient
GET http://localhost:8000/skills
#+end_src
